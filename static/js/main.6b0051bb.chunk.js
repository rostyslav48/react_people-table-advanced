(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var c=n(24),r=(n(33),n(34),n(6)),a=n(3),s=n(1),l=function(){return Object(s.jsx)("h1",{className:"title",children:"Home Page"})},i=n(4),o=n(0),j=(n(36),function(){return Object(s.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(s.jsx)("div",{className:"Loader__content"})})});function u(){return(e=500,new Promise((function(t){return setTimeout(t,e)}))).then((function(){return fetch("https://mate-academy.github.io/react_people-table/api/people.json")})).then((function(e){return e.json()}));var e}var d=function(e){return e.Default="",e.WentWrong="Something went wrong",e}({}),b=n(8),h=n.n(b),O=function(e){return e.Male="m",e.Female="f",e}({}).Male,m=function(e){return e===O},x=function(e){var t=e.person,n=Object(r.d)(),c=Object(i.a)(n,1)[0],a=t.name,l=t.slug,o=t.sex;return Object(s.jsx)(r.b,{className:h()({"has-text-danger":!m(o)}),to:{pathname:"../".concat(l),search:c.toString()},children:a})};function f(e,t){var n=new URLSearchParams(e.toString());return Object.entries(t).forEach((function(e){var t=Object(i.a)(e,2),c=t[0],r=t[1];null===r?n.delete(c):Array.isArray(r)?(n.delete(c),r.forEach((function(e){n.append(c,e)}))):n.set(c,r)})),n.toString()}var p=function(e){var t=e.people,n=Object(a.r)().personSlug,c=Object(r.d)(),l=Object(i.a)(c,1)[0],o=l.get("sort"),j=l.get("order"),u=function(e){var t={sort:e,order:null};return o!==e||j||(t.order="desc"),o===e&&j&&(t.sort=null),f(l,t)};return Object(s.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[["Name","Sex","Born","Died"].map((function(e){return Object(s.jsx)("th",{children:Object(s.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:[e,Object(s.jsx)(r.b,{to:{search:u(e.toLowerCase())},children:Object(s.jsx)("span",{className:"icon",children:Object(s.jsx)("i",{className:h()("fas",{"fa-sort":e.toLowerCase()!==o,"fa-sort-up":e.toLowerCase()===o&&!j,"fa-sort-down":e.toLowerCase()===o&&j})})})})]})},e)})),["Mother","Father"].map((function(e){return Object(s.jsx)("th",{children:e},e)}))]})}),Object(s.jsx)("tbody",{children:t.map((function(e){return Object(s.jsxs)("tr",{"data-cy":"person",className:h()({"has-background-warning":e.slug===n}),children:[Object(s.jsx)("td",{children:Object(s.jsx)(x,{person:e})}),Object(s.jsx)("td",{children:e.sex}),Object(s.jsx)("td",{children:e.born}),Object(s.jsx)("td",{children:e.died}),Object(s.jsx)("td",{children:e.mother?Object(s.jsx)(x,{person:e.mother}):e.motherName||"-"}),Object(s.jsx)("td",{children:e.father?Object(s.jsx)(x,{person:e.father}):e.fatherName||"-"})]},e.slug)}))})]})},v=n(22),g=n(7),N=n(5),y=function(){var e=Object(r.d)(),t=Object(i.a)(e,2),n=t[0],c=t[1],a={All:null,Male:"m",Female:"f"},l=n.get("sex")||null,o=n.getAll("centuries")||[],j=function(e){var t=o.includes(e)?o.filter((function(t){return t!==e})):[].concat(Object(g.a)(o),[e]);return f(n,{centuries:t})};return Object(s.jsxs)("nav",{className:"panel",children:[Object(s.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(s.jsx)("p",{className:"panel-tabs","data-cy":"SexFilter",children:Object.keys(a).map((function(e){var t=e;return Object(s.jsx)(r.b,{className:h()({"is-active":a[t]===l}),to:{search:f(n,{sex:a[t]})},children:e},e)}))}),Object(s.jsx)("div",{className:"panel-block",children:Object(s.jsxs)("p",{className:"control has-icons-left",children:[Object(s.jsx)("input",{"data-cy":"NameFilter",type:"search",className:"input",placeholder:"Search",onChange:function(e){var t,r;t="query",r=e.target.value,c(f(n,Object(N.a)({},t,r)))}}),Object(s.jsx)("span",{className:"icon is-left",children:Object(s.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),Object(s.jsx)("div",{className:"panel-block",children:Object(s.jsxs)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[Object(s.jsx)("div",{className:"level-left",children:["16","17","18","19","20"].map((function(e){return Object(s.jsx)(r.b,{"data-cy":"century",className:h()("button","mr-1",{"is-info":o.includes(e)}),to:{search:j(e)},children:e},e)}))}),Object(s.jsx)("div",{className:"level-right ml-4",children:Object(s.jsx)(r.b,{"data-cy":"centuryALL",className:h()("button",{"is-success":!o.length,"is-outlined":!!o.length}),to:{search:f(n,{centuries:null})},children:"All"})})]})}),Object(s.jsx)("div",{className:"panel-block",children:Object(s.jsx)(r.b,{className:"button is-link is-outlined is-fullwidth",to:{search:f(n,{centuries:null,query:null,sex:null})},children:"Reset all filters"})})]})},w=function(e,t){var n=t.map(Number);return t.length?e.filter((function(e){var t,c=e.born;return n.includes((t=c,Math.ceil(t/100)))})):e},S=function(e,t){var n=function(e,t,n){var c=Object(g.a)(e).sort(function(e){return function(t,n){return"string"===typeof t[e]?t[e].localeCompare(n[e]):"number"===typeof t[e]?+(null!==(c=t[e])&&void 0!==c?c:0)-+(null!==(r=n[e])&&void 0!==r?r:0):0;var c,r}}(t));return n?c.reverse():c}(e,t.sort,t.order);return n=function(e,t){return t?e.filter((function(e){return e.sex===t})):e}(n,t.sex),n=function(e,t){var n=t.toLowerCase().trim();return n?e.filter((function(e){return e.name.toLowerCase().includes(n)})):e}(n,t.query),n=w(n,t.centuries)},k=function(){var e=Object(o.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(o.useState)(d.Default),l=Object(i.a)(a,2),b=l[0],h=l[1],O=Object(o.useState)(!1),m=Object(i.a)(O,2),x=m[0],f=m[1],g=Object(r.d)(),N=Object(i.a)(g,1)[0],w={query:N.get("query")||"",sex:N.get("sex")||null,centuries:N.getAll("centuries")||[],sort:N.get("sort")||"",order:N.get("order")||""},k=S(n,w),L=!x&&b,C=!x&&!b&&!n.length,P=!x&&!b&&!k.length,A=!x&&!b&&Boolean(k.length);return Object(o.useEffect)((function(){f(!0),u().then((function(e){return c(function(e){return e.map((function(t){var n=e.find((function(e){var n=e.name;return t.fatherName===n})),c=e.find((function(e){var n=e.name;return t.motherName===n}));return Object(v.a)(Object(v.a)({},t),{},{father:n,mother:c})}))}(e))})).catch((function(){return h(d.WentWrong)})).finally((function(){return f(!1)}))}),[]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h1",{className:"title",children:"People Page"}),Object(s.jsx)("div",{className:"block",children:Object(s.jsxs)("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:[Object(s.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:Object(s.jsx)(y,{})}),Object(s.jsx)("div",{className:"column",children:Object(s.jsxs)("div",{className:"box table-container",children:[x&&Object(s.jsx)(j,{}),L&&Object(s.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:b}),C&&Object(s.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"}),P&&Object(s.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people matching the current search criteria"}),A&&Object(s.jsx)(p,{people:k})]})})]})})]})},L=(n(37),function(e){var t=e.isActive;return h()("navbar-item",{"has-background-grey-lighter":t})}),C=function(){return Object(s.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(s.jsx)("div",{className:"container",children:Object(s.jsxs)("div",{className:"navbar-brand",children:[Object(s.jsx)(r.c,{className:L,to:"/",children:"Home"}),Object(s.jsx)(r.c,{className:L,to:"/people",children:"People"})]})})})},P=function(){return Object(s.jsxs)("div",{"data-cy":"app",children:[Object(s.jsx)(C,{}),Object(s.jsx)("main",{className:"section",children:Object(s.jsx)("div",{className:"container",children:Object(s.jsx)(a.b,{})})})]})},A=function(){return Object(s.jsx)("h1",{className:"title",children:"Page not found"})},F=function(){return Object(s.jsx)(r.a,{children:Object(s.jsx)(a.e,{children:Object(s.jsxs)(a.c,{path:"/",element:Object(s.jsx)(P,{}),children:[Object(s.jsx)(a.c,{index:!0,element:Object(s.jsx)(l,{})}),Object(s.jsx)(a.c,{path:"/home",element:Object(s.jsx)(a.a,{to:"/",replace:!0})}),Object(s.jsx)(a.c,{path:"/people",children:Object(s.jsx)(a.c,{path:":personSlug?",element:Object(s.jsx)(k,{})})}),Object(s.jsx)(a.c,{path:"*",element:Object(s.jsx)(A,{})})]})})})};Object(c.createRoot)(document.getElementById("root")).render(Object(s.jsx)(F,{}))}},[[38,1,2]]]);
//# sourceMappingURL=main.6b0051bb.chunk.js.map